import{a6 as D,al as N,c0 as E,c1 as F,A as _,c2 as R,ab as L,bX as U,d as W,c3 as X,aZ as P,c as w,a,I as h,H as y,bp as l,b as C,w as c,b$ as j,F as z,b0 as T,bg as p,bU as S,Q as M,e as $,aA as H,bS as K,u as Y,o as n}from"./index-Cz3bRGF6.js";import{Q as q}from"./QChip-CZAsVCLy.js";import{Q as A}from"./QBadge-B9NdF-lA.js";import{u as Z}from"./moduleStore-cwxIc1Ud.js";import{u as G}from"./cartStore-CYo3gT96.js";import{m as J,c as ee}from"./menuData-D5ObFFOv.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={position:{type:String,default:"bottom-right",validator:i=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(i)},offset:{type:Array,validator:i=>i.length===2},expand:Boolean};function se(){const{props:i,proxy:{$q:f}}=D(),d=N(F,E);if(d===E)return console.error("QPageSticky needs to be child of QLayout"),E;const m=_(()=>{const o=i.position;return{top:o.indexOf("top")!==-1,right:o.indexOf("right")!==-1,bottom:o.indexOf("bottom")!==-1,left:o.indexOf("left")!==-1,vertical:o==="top"||o==="bottom",horizontal:o==="left"||o==="right"}}),r=_(()=>d.header.offset),k=_(()=>d.right.offset),u=_(()=>d.footer.offset),v=_(()=>d.left.offset),V=_(()=>{let o=0,b=0;const g=m.value,I=f.lang.rtl===!0?-1:1;g.top===!0&&r.value!==0?b=`${r.value}px`:g.bottom===!0&&u.value!==0&&(b=`${-u.value}px`),g.left===!0&&v.value!==0?o=`${I*v.value}px`:g.right===!0&&k.value!==0&&(o=`${-I*k.value}px`);const x={transform:`translate(${o}, ${b})`};return i.offset&&(x.margin=`${i.offset[1]}px ${i.offset[0]}px`),g.vertical===!0?(v.value!==0&&(x[f.lang.rtl===!0?"right":"left"]=`${v.value}px`),k.value!==0&&(x[f.lang.rtl===!0?"left":"right"]=`${k.value}px`)):g.horizontal===!0&&(r.value!==0&&(x.top=`${r.value}px`),u.value!==0&&(x.bottom=`${u.value}px`)),x}),Q=_(()=>`q-page-sticky row flex-center fixed-${i.position} q-page-sticky--${i.expand===!0?"expand":"shrink"}`);function B(o){const b=R(o.default);return L("div",{class:Q.value,style:V.value},i.expand===!0?b:[L("div",b)])}return{$layout:d,getStickyContent:B}}const ae=U({name:"QPageSticky",props:oe,setup(i,{slots:f}){const{getStickyContent:d}=se();return()=>d(f)}}),ne={class:"menu-view"},re={class:"menu-header"},le={class:"header-top"},ie={key:0,class:"search-bar"},ue={key:0,class:"category-tabs"},ce={class:"menu-list"},de=["onClick"],pe={class:"menu-image"},fe=["src","alt"],me={class:"menu-info"},ve={class:"description"},ge={class:"price-row"},he={class:"price"},ye={class:"bottom-actions"},_e={key:0,class:"cart-summary"},ke={class:"module-indicator"},be=W({__name:"MenuView",setup(i){const f=Y(),d=X(),m=Z(),r=G(),k=_(()=>d.query.from==="waiting"),u=P(null),v=P("");P(!1);const V=_(()=>{let s=J;if(u.value&&(s=s.filter(t=>t.category===u.value)),v.value){const t=v.value.toLowerCase();s=s.filter(e=>{var O;return e.name.toLowerCase().includes(t)||((O=e.description)==null?void 0:O.toLowerCase().includes(t))})}return s}),Q=s=>s.toLocaleString()+"원",B=s=>{r.addItem({menuId:s.id,name:s.name,price:s.price,quantity:1})},o=s=>{const t=r.items.find(e=>e.menuId===s);return(t==null?void 0:t.quantity)||0},b=s=>{m.isModuleEnabled("menuDetail")&&f.push(`/service/menu-detail?id=${s.id}`)},g=()=>{f.push("/service/cart")},I=()=>{f.push("/service/waiting")},x=()=>{navigator.share&&navigator.share({title:"아치서울 레스토랑 메뉴",text:"맛있는 메뉴를 확인해보세요!",url:window.location.href})};return(s,t)=>(n(),w("div",ne,[a("div",re,[a("div",le,[k.value?(n(),y(S,{key:0,flat:"",icon:"arrow_back",onClick:I})):h("",!0),t[2]||(t[2]=a("div",{class:"shop-info"},[a("h1",null,"아치서울 레스토랑"),a("p",null,"테이블 A-12")],-1)),l(m).isOptionEnabled("menu","share")?(n(),y(S,{key:1,flat:"",round:"",icon:"share",onClick:x})):h("",!0)]),l(m).isOptionEnabled("menu","search")?(n(),w("div",ie,[C(j,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),placeholder:"메뉴 검색",outlined:"",dense:"",clearable:""},{prepend:c(()=>[C(M,{name:"search"})]),_:1},8,["modelValue"])])):h("",!0)]),l(m).isOptionEnabled("menu","category")?(n(),w("div",ue,[C(q,{outline:u.value!==null,color:"primary",clickable:"",onClick:t[1]||(t[1]=e=>u.value=null)},{default:c(()=>[...t[3]||(t[3]=[$(" 전체 ",-1)])]),_:1},8,["outline"]),(n(!0),w(z,null,T(l(ee),e=>(n(),y(q,{key:e.id,outline:u.value!==e.id,color:"primary",clickable:"",onClick:O=>u.value=e.id},{default:c(()=>[$(p(e.name),1)]),_:2},1032,["outline","onClick"]))),128))])):h("",!0),a("div",ce,[(n(!0),w(z,null,T(V.value,e=>(n(),w("div",{key:e.id,class:H(["menu-item",{"sold-out":e.soldOut}]),onClick:O=>b(e)},[a("div",pe,[a("img",{src:e.image||"/placeholder.png",alt:e.name},null,8,fe),e.soldOut&&l(m).isOptionEnabled("menu","soldOut")?(n(),y(q,{key:0,color:"red","text-color":"white",class:"sold-out-badge"},{default:c(()=>[...t[4]||(t[4]=[$(" 품절 ",-1)])]),_:1})):h("",!0)]),a("div",me,[a("h3",null,p(e.name),1),a("p",ve,p(e.description),1),a("div",ge,[a("span",he,p(Q(e.price)),1),l(m).isOptionEnabled("menu","cart")&&!e.soldOut?(n(),y(S,{key:0,round:"",color:"primary",icon:"add",size:"sm",onClick:K(O=>B(e),["stop"])},null,8,["onClick"])):h("",!0),o(e.id)>0?(n(),y(A,{key:1,color:"red",floating:""},{default:c(()=>[$(p(o(e.id)),1)]),_:2},1024)):h("",!0)])])],10,de))),128))]),!k.value&&l(m).isOptionEnabled("menu","cart")&&l(r).totalItems>0?(n(),y(ae,{key:1,position:"bottom-right",offset:[16,100]},{default:c(()=>[C(S,{fab:"",icon:"shopping_cart",color:"primary",onClick:g},{default:c(()=>[C(A,{color:"red",floating:""},{default:c(()=>[$(p(l(r).totalItems),1)]),_:1})]),_:1})]),_:1})):h("",!0),a("div",ye,[l(r).totalItems>0?(n(),w("div",_e,[a("span",null,p(l(r).totalItems)+"개 · "+p(Q(l(r).totalPrice)),1)])):h("",!0),k.value?(n(),y(S,{key:1,color:"primary",class:"order-btn",onClick:I},{default:c(()=>[C(M,{name:"arrow_back",class:"q-mr-sm"}),$(" 웨이팅으로 돌아가기 ("+p(l(r).totalItems)+"개 담김) ",1)]),_:1})):(n(),y(S,{key:2,color:"primary",class:"order-btn",disable:l(r).totalItems===0,onClick:g},{default:c(()=>[C(M,{name:"shopping_cart",class:"q-mr-sm"}),$(" "+p(l(r).totalItems>0?"장바구니 보기":"메뉴를 선택해주세요"),1)]),_:1},8,["disable"]))]),a("div",ke,[C(q,{color:"green","text-color":"white",icon:"restaurant_menu",size:"sm"},{default:c(()=>[...t[5]||(t[5]=[$(" 메뉴판 모듈 ",-1)])]),_:1})])]))}}),Qe=te(be,[["__scopeId","data-v-3c215ea3"]]);export{Qe as default};
