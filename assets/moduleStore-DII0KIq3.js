import{b_ as b,aZ as p,A as s}from"./index-BZRtWv1A.js";const u={dynamicQr:{id:"dynamicQr",name:"동적 QR",icon:"qr_code_2",color:"#4CAF50",enabled:!0,order:1,options:[{id:"dynamicRefresh",label:"동적 갱신",description:"QR 코드 주기적 자동 갱신",enabled:!0},{id:"sessionCreate",label:"세션 생성",description:"스캔 시 고유 세션/식별자 발급",enabled:!0},{id:"autoExpire",label:"자동 만료",description:"완료/취소 시 QR 무효화",enabled:!0},{id:"nfcSupport",label:"NFC 지원",description:"QR 외 NFC 태그 병행",enabled:!1},{id:"multiDevice",label:"멀티 디바이스",description:"동일 세션 복수 단말 허용",enabled:!1}]},waiting:{id:"waiting",name:"웨이팅",icon:"schedule",color:"#2196F3",enabled:!0,order:2,options:[{id:"waitRegister",label:"대기 등록",description:"고객 정보 입력 및 대기열 등록",enabled:!0},{id:"queueNotify",label:"순번 안내",description:"실시간 대기 순번/예상 시간 표시",enabled:!0},{id:"smsAlert",label:"알림 발송",description:"입장 임박 시 SMS/푸시 알림",enabled:!1},{id:"menuPreview",label:"메뉴 미리보기",description:"대기 중 메뉴판 열람 허용",enabled:!1},{id:"preCart",label:"장바구니 사전구성",description:"대기 중 장바구니 담기 → 입장 후 연동",enabled:!1}]},menu:{id:"menu",name:"메뉴판",icon:"restaurant_menu",color:"#FF9800",enabled:!0,order:3,options:[{id:"categorySort",label:"카테고리 분류",description:"메뉴 카테고리별 정렬/필터",enabled:!0},{id:"search",label:"검색 기능",description:"메뉴명/재료 검색",enabled:!1},{id:"soldOutDisplay",label:"품절 표시",description:"실시간 품절/판매중지 반영",enabled:!0},{id:"optionSelect",label:"옵션 선택",description:"사이즈, 토핑 등 커스텀",enabled:!1},{id:"quantityControl",label:"수량 조절",description:"수량 증감",enabled:!0},{id:"addToCart",label:"장바구니 담기",description:"선택 메뉴 장바구니 추가",enabled:!0},{id:"externalShare",label:"외부 공유",description:"원격 사용자에게 메뉴판 링크 공유",enabled:!1},{id:"participantDistinct",label:"참여자 구분",description:"외부 참여자 닉네임별 선택 구분",enabled:!1},{id:"realtimeSync",label:"실시간 동기화",description:"외부 참여자 선택 실시간 반영",enabled:!1},{id:"hostEdit",label:"호스트 편집 권한",description:"외부 참여자 선택 수정/삭제",enabled:!1},{id:"orderApproval",label:"주문 승인",description:"호스트만 최종 주문 확정",enabled:!1}]},menuDetail:{id:"menuDetail",name:"메뉴 디테일",icon:"info",color:"#9C27B0",enabled:!1,order:4,options:[{id:"detailInfo",label:"상세 정보",description:"이미지, 설명, 가격, 영양정보 등",enabled:!0},{id:"promoBanner",label:"프로모션 배너",description:"개별 상품 할인/이벤트 표시",enabled:!1},{id:"snsShare",label:"SNS 공유",description:"블로그/SNS 공유 버튼",enabled:!1},{id:"externalLanding",label:"외부 유입 랜딩",description:"광고/블로그에서 직접 진입",enabled:!1},{id:"directOrder",label:"바로 주문",description:"메뉴판 거치지 않고 단품 주문",enabled:!1},{id:"relatedRecommend",label:"관련 상품 추천",description:"연관 메뉴 표시",enabled:!1}]},payment:{id:"payment",name:"결제창",icon:"payment",color:"#F44336",enabled:!0,order:5,options:[{id:"orderPaymentLink",label:"주문-결제 연동",description:"식별자 기반 주문내역 자동 매핑",enabled:!0},{id:"benefitCompare",label:"결제 혜택 비교",description:"결제수단별 할인/적립/혜택 비교 UI",enabled:!1},{id:"optimalRecommend",label:"최적 결제 추천",description:"혜택 최대화 결제수단 자동 추천",enabled:!1},{id:"applessPayment",label:"앱리스 결제",description:"기본 카메라/NFC → 결제앱 자동 호출",enabled:!1},{id:"dynamicMpm",label:"동적 MPM 생성",description:"서버에서 실시간 결제 데이터 생성",enabled:!1},{id:"appFallback",label:"앱 미설치 Fallback",description:"앱스토어 자동 이동",enabled:!1},{id:"postpaid",label:"후불 결제",description:"주문 후 퇴장 시 결제",enabled:!1},{id:"prepaid",label:"선불 결제",description:"주문과 동시 결제",enabled:!0}]}},N=b("moduleStore",()=>{const a=p(JSON.parse(JSON.stringify(u))),o=s(()=>Object.values(a.value).filter(e=>e.enabled).sort((e,l)=>e.order-l.order)),t=s(()=>{const e=[],l=o.value,i=l.some(d=>d.id==="menu"),n=l.some(d=>d.id==="menuDetail");for(const d of l)switch(d.id){case"dynamicQr":e.push("qr-entry");break;case"waiting":e.push("waiting");break;case"menu":e.push("menu");break;case"menuDetail":!i&&n&&e.push("menu-detail");break;case"payment":(i||n)&&e.push("cart"),e.push("payment");break}return e.push("complete"),e});return{modules:a,activeModules:o,serviceFlow:t,toggleModule:e=>{a.value[e].enabled=!a.value[e].enabled},toggleOption:(e,l)=>{const i=a.value[e].options.find(n=>n.id===l);i&&(i.enabled=!i.enabled)},updateModuleOrder:e=>{e.forEach((l,i)=>{const n=l;a.value[n]&&(a.value[n].order=i+1)})},getNextRoute:e=>{const l=t.value.indexOf(e);return l===-1||l>=t.value.length-1?null:t.value[l+1]},getPrevRoute:e=>{const l=t.value.indexOf(e);return l<=0?null:t.value[l-1]},isOptionEnabled:(e,l)=>{const i=a.value[e];if(!i.enabled)return!1;const n=i.options.find(d=>d.id===l);return(n==null?void 0:n.enabled)??!1},isModuleEnabled:e=>{var l;return((l=a.value[e])==null?void 0:l.enabled)??!1},resetToDefault:()=>{a.value=JSON.parse(JSON.stringify(u))},applyCanvasModules:e=>{Object.keys(a.value).forEach(l=>{const i=l;a.value[i].enabled=!1}),e.forEach((l,i)=>{const n=l.id;a.value[n]&&(a.value[n].enabled=!0,a.value[n].order=i+1,l.options.forEach(d=>{const r=a.value[n].options.find(c=>c.id===d.id);r&&(r.enabled=d.enabled)}))})}}},{persist:!0});export{N as u};
